<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Instant Roof Estimate</title>

<!-- Google Places API (CORRECT) -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCm6Cw8lXx4as9YB57j-XmqYLGfSPEUW9Q&libraries=places&callback=initAutocomplete"
  async
  defer
></script>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  background: #0b1220;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 40px 20px;
}

.card {
  width: 100%;
  max-width: 520px;
  background: #111a2c;
  border-radius: 16px;
  padding: 32px 32px 24px;
  border: 1px solid #1f2b44;
  box-shadow: 0 20px 60px rgba(0,0,0,.5);
  margin-bottom: 16px;
}

h1 {
  margin: 0 0 6px;
  text-align: center;
}

p.sub {
  margin: 0 0 24px;
  text-align: center;
  color: #9fb3d1;
}

.progress {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-bottom: 24px;
}

.dot {
  height: 6px;
  width: 18px;
  background: #24314f;
  border-radius: 3px;
}

.dot.active { background: #4cc9f0; }

.field {
  margin-bottom: 18px;
}

label {
  display: block;
  margin-bottom: 6px;
  font-size: 14px;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #2a3a5c;
  background: #0b1220;
  color: #fff;
  font-size: 15px;
}

.buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.btn {
  padding: 12px;
  border-radius: 8px;
  background: #0b1220;
  border: 1px solid #2a3a5c;
  color: #fff;
  cursor: pointer;
}

.btn.selected {
  background: #4cc9f0;
  color: #000;
}

.main-btn {
  width: 100%;
  margin-top: 12px;
  padding: 14px;
  border-radius: 10px;
  border: none;
  background: #4cc9f0;
  color: #000;
  font-weight: 600;
  cursor: pointer;
}

.hidden { display: none; }
</style>
</head>

<body>

<div class="card">
  <h1>Instant Roof Estimate</h1>
  <p class="sub">Answer a few quick questions</p>

  <div class="progress">
    <div class="dot active"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>

  <form id="form">

    <div class="step">
      <div class="field">
        <label>First Name</label>
        <input id="firstName" required />
      </div>
    </div>

    <div class="step hidden">
      <div class="field">
        <label>Email</label>
        <input id="email" type="email" required />
      </div>
    </div>

    <div class="step hidden">
      <div class="field">
        <label>Property Address</label>
        <input id="address" placeholder="Start typing address..." />
      </div>
    </div>

    <div class="step hidden">
      <label>Roof Type</label>
      <div class="buttons">
        <button type="button" class="btn" data-roof="Asphalt">Asphalt</button>
        <button type="button" class="btn" data-roof="Metal">Metal</button>
        <button type="button" class="btn" data-roof="Tile">Tile</button>
      </div>
    </div>

    <div class="step hidden">
      <label>Stories</label>
      <div class="buttons">
        <button type="button" class="btn" data-stories="1">1 Story</button>
        <button type="button" class="btn" data-stories="2">2 Stories</button>
        <button type="button" class="btn" data-stories="3">3+ Stories</button>
      </div>
    </div>

    <button class="main-btn" id="nextBtn">Next</button>

  </form>
</div>

<script>
let step = 0;
let addressData = null;
let roofType = null;
let stories = null;
let autocomplete;

function initAutocomplete() {
  autocomplete = new google.maps.places.Autocomplete(
    document.getElementById("address"),
    { types: ["address"], componentRestrictions: { country: "us" } }
  );

  autocomplete.addListener("place_changed", () => {
    const place = autocomplete.getPlace();
    if (!place.address_components) return;
    addressData = place.formatted_address;
  });
}

document.getElementById("address").addEventListener("input", () => {
  addressData = null;
});

const steps = document.querySelectorAll(".step");
const dots = document.querySelectorAll(".dot");
const btn = document.getElementById("nextBtn");

btn.onclick = e => {
  e.preventDefault();

  if (step === 2 && !addressData) {
    alert("Please select an address from the dropdown");
    return;
  }

  if (step === 3 && !roofType) return;
  if (step === 4 && !stories) return;

  if (step < steps.length - 1) {
    steps[step].classList.add("hidden");
    dots[step].classList.remove("active");
    step++;
    steps[step].classList.remove("hidden");
    dots[step].classList.add("active");
    if (step === steps.length - 1) btn.textContent = "Get My Estimate";
  }
};

document.querySelectorAll("[data-roof]").forEach(b =>
  b.onclick = () => {
    document.querySelectorAll("[data-roof]").forEach(x => x.classList.remove("selected"));
    b.classList.add("selected");
    roofType = b.dataset.roof;
  }
);

document.querySelectorAll("[data-stories]").forEach(b =>
  b.onclick = () => {
    document.querySelectorAll("[data-stories]").forEach(x => x.classList.remove("selected"));
    b.classList.add("selected");
    stories = b.dataset.stories;
  }
);
</script>

</body>
</html>
