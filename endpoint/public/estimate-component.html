<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Instant Roof Estimate</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD5W9aPwPQQPFXHf4uzYeSAmC8nC15wXsM&libraries=places"
  defer
></script>

<style>
* { box-sizing: border-box; }
body {
  margin: 0;
  padding: 40px 16px;
  background:#0a0e14;
  font-family: system-ui, sans-serif;
  color:#fff;
}
.card {
  max-width:520px;
  margin:auto;
  background:linear-gradient(180deg,#0f1b2d,#0c1624);
  border-radius:16px;
  padding:28px;
  border:1px solid #243246;
}
h1{text-align:center;margin:0;}
.subtitle{text-align:center;color:#9fb3c8;margin-bottom:16px;}
.step{display:none;}
.step.active{display:block;}
label{display:block;margin-bottom:6px;}
input{
  width:100%;padding:14px;border-radius:8px;
  background:#0a0e14;border:1px solid #2c3e55;color:#fff;
}
.buttons{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;}
.btn{padding:12px;border-radius:8px;background:#0a0e14;border:1px solid #2c3e55;color:#fff;}
.btn.selected{background:#3bbcff;border-color:#3bbcff;}
.primary{
  margin-top:16px;width:100%;padding:14px;
  background:linear-gradient(90deg,#3bbcff,#1f8fff);
  border:none;border-radius:8px;color:#fff;font-size:16px;
}
.loading,.result{text-align:center;display:none;}
.price{font-size:42px;color:#3bbcff;margin-top:16px;}
</style>
</head>

<body>
<div class="card">

<h1>Instant Roof Estimate</h1>
<div class="subtitle">Answer a few quick questions</div>

<div class="step active">
  <label>First Name</label>
  <input id="firstName" />
  <button class="primary" onclick="next()">Next</button>
</div>

<div class="step">
  <label>Email</label>
  <input id="email" type="email"/>
  <button class="primary" onclick="next()">Next</button>
</div>

<div class="step">
  <label>Property Address</label>
  <input id="address" placeholder="Start typing address..."/>
  <button class="primary" onclick="next()">Next</button>
</div>

<div class="step">
  <label>Roof Type</label>
  <div class="buttons">
    <button class="btn" onclick="pick(this,'Asphalt')">Asphalt</button>
    <button class="btn" onclick="pick(this,'Metal')">Metal</button>
    <button class="btn" onclick="pick(this,'Tile')">Tile</button>
  </div>
  <button class="primary" onclick="next()">Next</button>
</div>

<div class="step">
  <label>Stories</label>
  <div class="buttons">
    <button class="btn" onclick="pick(this,1)">1 Story</button>
    <button class="btn" onclick="pick(this,2)">2 Stories</button>
    <button class="btn" onclick="pick(this,3)">3+ Stories</button>
  </div>
  <button class="primary" onclick="submitForm()">Get My Estimate</button>
</div>

<div class="loading">Calculating your estimateâ€¦</div>
<div class="result">
  <h2>Your Instant Estimate</h2>
  <div class="price" id="price">$0</div>
</div>

</div>

<script>
let step=0;
const steps=document.querySelectorAll('.step');

const data={
  firstName:'',
  email:'',
  address:'',
  roof_type:'',
  stories:''
};

function next(){
  if(step===0) data.firstName=firstName.value.trim();
  if(step===1) data.email=email.value.trim();
  if(step===2) data.address=address.value.trim();
  if(!Object.values(data)[step]) return alert('Complete this step');
  steps[step].classList.remove('active');
  step++;
  steps[step].classList.add('active');
}

function pick(btn,val){
  btn.parentElement.querySelectorAll('.btn').forEach(b=>b.classList.remove('selected'));
  btn.classList.add('selected');
  if(step===3) data.roof_type=val;
  if(step===4) data.stories=val;
}

async function submitForm(){
  document.querySelector('.loading').style.display='block';
  steps.forEach(s=>s.style.display='none');

  const res = await fetch(
    'https://services.leadconnectorhq.com/hooks/FDGlykNntzs46TT1VA7/webhook-trigger/E07CUMjucJIR9uy7SuDa',
    {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(data)
    }
  );

  const json = await res.json();

  document.querySelector('.loading').style.display='none';
  document.querySelector('.result').style.display='block';
  document.getElementById('price').innerText =
    `$${Number(json.totalEstimate || json.totalPrice).toLocaleString()}`;
}

window.addEventListener('load',()=>{
  const ac=new google.maps.places.Autocomplete(
    document.getElementById('address'),
    {types:['address'],componentRestrictions:{country:'us'}}
  );
  ac.addListener('place_changed',()=>{
    const p=ac.getPlace();
    data.address=p.formatted_address||'';
  });
});
</script>
</body>
</html>
