<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Instant Roof Estimate</title>

<!-- Google Places -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCm6Cw8lXx4as9YB57j-XmqYLGfSPEUW9Q&libraries=places&loading=async"></script>

<style>
* { box-sizing:border-box; margin:0; padding:0; }

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
  background:#0A0E14;
  color:#fff;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.box {
  width:100%;
  max-width:520px;
  background:#0F1520;
  border-radius:16px;
  padding:40px;
  border:1px solid #2D3A4D;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}

h1 { text-align:center; margin-bottom:6px; }
p.sub { text-align:center; color:#9FBDC9; margin-bottom:24px; }

/* Progress Dots */
.progress {
  display:flex;
  justify-content:center;
  gap:8px;
  margin-bottom:28px;
}
.dot {
  width:8px;
  height:8px;
  background:#2D3A4D;
  border-radius:50%;
  transition:.3s;
}
.dot.active {
  width:24px;
  border-radius:4px;
  background:#00BFFF;
  box-shadow:0 0 10px rgba(0,191,255,.5);
}

.step { display:none; }
.step.active { display:block; }

label { display:block; margin-bottom:10px; font-weight:500; }

input {
  width:100%;
  padding:14px 16px;
  background:#0A0E14;
  border:1px solid #2D3A4D;
  border-radius:8px;
  color:#fff;
  font-size:15px;
}
input:focus {
  outline:none;
  border-color:#00BFFF;
  box-shadow:0 0 0 3px rgba(0,191,255,.15);
}

.buttons {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:12px;
}
.option {
  padding:14px;
  background:#0A0E14;
  border:2px solid #2D3A4D;
  border-radius:8px;
  color:#fff;
  cursor:pointer;
}
.option.selected {
  background:#00BFFF;
  border-color:#00BFFF;
}

.action {
  margin-top:26px;
  width:100%;
  padding:16px;
  background:#00BFFF;
  border:none;
  border-radius:8px;
  font-size:16px;
  font-weight:600;
  color:#fff;
  cursor:pointer;
}

.pac-container {
  background:#0F1520;
  border:1px solid #2D3A4D;
}
.pac-item { color:#fff; }
.pac-item:hover { background:#182235; }
.pac-item-query { color:#00BFFF; }
</style>
</head>

<body>
<div class="box">
  <h1>Instant Roof Estimate</h1>
  <p class="sub">Answer a few quick questions</p>

  <!-- Progress -->
  <div class="progress">
    <div class="dot active"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>

  <!-- Step 1 -->
  <div class="step active" data-step="1">
    <label>First Name</label>
    <input id="firstName"/>
  </div>

  <!-- Step 2 -->
  <div class="step" data-step="2">
    <label>Email</label>
    <input id="email" type="email"/>
  </div>

  <!-- Step 3 -->
  <div class="step" data-step="3">
    <label>Property Address</label>
    <input id="address" placeholder="Start typing addressâ€¦" autocomplete="off"/>
  </div>

  <!-- Step 4 -->
  <div class="step" data-step="4">
    <label>Roof Type</label>
    <div class="buttons">
      <button class="option" data-roof="Asphalt">Asphalt</button>
      <button class="option" data-roof="Metal">Metal</button>
      <button class="option" data-roof="Tile">Tile</button>
      <button class="option" data-roof="Other">Other</button>
    </div>
  </div>

  <!-- Step 5 -->
  <div class="step" data-step="5">
    <label>Stories</label>
    <div class="buttons">
      <button class="option" data-stories="1">1 Story</button>
      <button class="option" data-stories="2">2 Stories</button>
      <button class="option" data-stories="3">3+ Stories</button>
    </div>
  </div>

  <button class="action" id="nextBtn">Next</button>
</div>

<script>
(() => {
  const webhook =
    "https://services.leadconnectorhq.com/hooks/FDGIykNfntzs46TT1VA7/webhook-trigger/EO7CUMjucJlR9uy7SuDa";

  let step = 1;
  const data = {};
  const addr = {};

  const steps = document.querySelectorAll(".step");
  const dots = document.querySelectorAll(".dot");
  const btn = document.getElementById("nextBtn");

  function updateUI() {
    steps.forEach(s => s.classList.remove("active"));
    steps[step-1].classList.add("active");

    dots.forEach((d,i)=>d.classList.toggle("active", i < step));

    btn.textContent = step === 5 ? "Get My Estimate" : "Next";
  }

  btn.onclick = () => {
    if (step === 1 && !firstName.value.trim()) return alert("Enter first name");
    if (step === 2 && !email.checkValidity()) return alert("Enter valid email");
    if (step === 3 && !addr.full) return alert("Select address from dropdown");
    if (step === 4 && !data.roof_type) return alert("Select roof type");
    if (step === 5 && !data.stories) return alert("Select stories");

    if (step < 5) {
      step++;
      updateUI();
    } else {
      submit();
    }
  };

  document.querySelectorAll("[data-roof]").forEach(b=>{
    b.onclick=()=>{
      document.querySelectorAll("[data-roof]").forEach(x=>x.classList.remove("selected"));
      b.classList.add("selected");
      data.roof_type=b.dataset.roof;
    };
  });

  document.querySelectorAll("[data-stories]").forEach(b=>{
    b.onclick=()=>{
      document.querySelectorAll("[data-stories]").forEach(x=>x.classList.remove("selected"));
      b.classList.add("selected");
      data.stories=b.dataset.stories;
    };
  });

  const autocomplete=new google.maps.places.Autocomplete(address,{
    types:["address"],componentRestrictions:{country:"us"}
  });

  autocomplete.addListener("place_changed",()=>{
    const p=autocomplete.getPlace();
    if(!p.address_components)return;
    let street="",city="",state="",zip="";
    p.address_components.forEach(c=>{
      if(c.types.includes("street_number"))street=c.long_name+" ";
      if(c.types.includes("route"))street+=c.long_name;
      if(c.types.includes("locality"))city=c.long_name;
      if(c.types.includes("administrative_area_level_1"))state=c.short_name;
      if(c.types.includes("postal_code"))zip=c.long_name;
    });
    addr.full=p.formatted_address;
    addr.street=street;
    addr.city=city;
    addr.state=state;
    addr.zip=zip;
    address.value=p.formatted_address;
  });

  async function submit() {
    await fetch(webhook,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({
        firstName:firstName.value,
        email:email.value,
        address:addr.full,
        street:addr.street,
        city:addr.city,
        state:addr.state,
        zip:addr.zip,
        roof_type:data.roof_type,
        stories:data.stories
      })
    });
    alert("Estimate submitted successfully");
  }
})();
</script>
</body>
</html>
